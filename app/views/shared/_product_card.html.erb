<div class="card h-100">
  <% if product.main_image %>
    <%= image_tag product.main_image, class: "card-img-top", style: "height: 200px; object-fit: cover;" %>
  <% else %>
    <div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 200px;">
      <i class="fas fa-image fa-3x text-muted"></i>
    </div>
  <% end %>
  
  <div class="card-body d-flex flex-column">
    <h6 class="card-title">
      <%= link_to product.name, product_path(product), class: "text-decoration-none" %>
    </h6>
    <p class="card-text text-muted small flex-grow-1">
      <%= truncate(product.description, length: 80) %>
    </p>
    
    <div class="mt-auto">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="h6 mb-0 text-success">$<%= product.current_price %></span>
        <% if product.featured? %>
          <span class="badge bg-warning">Featured</span>
        <% end %>
      </div>
      
      <% if product.stock_quantity > 0 %>
        <%= form_with url: cart_add_path, method: :post, local: true, class: "d-grid" do |f| %>
          <%= f.hidden_field :product_id, value: product.id %>
          <%= f.submit "Add to Cart", class: "btn btn-success btn-sm" %>
        <% end %>
      <% else %>
        <button class="btn btn-secondary btn-sm w-100" disabled>Out of Stock</button>
      <% end %>
    </div>
  </div>
</div>
